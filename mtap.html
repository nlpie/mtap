
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>mtap &#8212; MTAP 0.6.0 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="mtap.io" href="io.html" />
    <link rel="prev" title="Welcome to MTAP’s documentation!" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-mtap">
<span id="mtap"></span><h1><a class="toc-backref" href="#id1">mtap</a><a class="headerlink" href="#module-mtap" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#module-mtap" id="id1">mtap</a></p>
<ul>
<li><p><a class="reference internal" href="#command-line-utility" id="id2">Command-Line Utility</a></p>
<ul>
<li><p><a class="reference internal" href="#running-events-service" id="id3">Running Events Service</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#api-documentation" id="id4">API Documentation</a></p>
<ul>
<li><p><a class="reference internal" href="#events-service-client-documents" id="id5">Events service client, documents</a></p></li>
<li><p><a class="reference internal" href="#labels" id="id6">Labels</a></p></li>
<li><p><a class="reference internal" href="#label-indices" id="id7">Label Indices</a></p></li>
<li><p><a class="reference internal" href="#custom-label-types" id="id8">Custom Label Types</a></p></li>
<li><p><a class="reference internal" href="#creating-processors" id="id9">Creating Processors</a></p></li>
<li><p><a class="reference internal" href="#processor-description-decorators" id="id10">Processor Description Decorators</a></p></li>
<li><p><a class="reference internal" href="#running-services" id="id11">Running Services</a></p></li>
<li><p><a class="reference internal" href="#running-a-pipeline" id="id12">Running a pipeline</a></p></li>
<li><p><a class="reference internal" href="#configuration" id="id13">Configuration</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="command-line-utility">
<h2><a class="toc-backref" href="#id2">Command-Line Utility</a><a class="headerlink" href="#command-line-utility" title="Permalink to this headline">¶</a></h2>
<div class="section" id="running-events-service">
<h3><a class="toc-backref" href="#id3">Running Events Service</a><a class="headerlink" href="#running-events-service" title="Permalink to this headline">¶</a></h3>
<p>usage:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>python -m mtap events [-h] [--address ADDRESS] [--port PORT]
                         [--workers WORKERS] [--register] [--config CONFIG]

optional arguments:
 -h, --help            show this help message and exit
 --address ADDRESS, -a ADDRESS
                       the address to serve the service on
 --port PORT, -p PORT  the port to serve the service on
 --workers WORKERS, -w WORKERS
                       number of worker threads to handle requests
 --register, -r        whether to register the service with the configured
                       service discovery
 --config CONFIG, -c CONFIG
                       path to config file
</pre></div>
</div>
</div>
</div>
<div class="section" id="api-documentation">
<h2><a class="toc-backref" href="#id4">API Documentation</a><a class="headerlink" href="#api-documentation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="events-service-client-documents">
<h3><a class="toc-backref" href="#id5">Events service client, documents</a><a class="headerlink" href="#events-service-client-documents" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="mtap.EventsClient">
<em class="property">class </em><code class="sig-prename descclassname">mtap.</code><code class="sig-name descname">EventsClient</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">address</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stub</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/events.html#EventsClient"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.EventsClient" title="Permalink to this definition">¶</a></dt>
<dd><p>A client object for interacting with the events service.</p>
<p>Normally, users shouldn’t have to use any of the methods on this object, as they are invoked by
the globally distributed object classes of <a class="reference internal" href="#mtap.Event" title="mtap.Event"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Event</span></code></a>, <a class="reference internal" href="#mtap.Document" title="mtap.Document"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Document</span></code></a>, and <code class="xref py py-obj docutils literal notranslate"><span class="pre">Labeler</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>address</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – The events service target e.g. ‘localhost:9090’ or
omit/None to use service discovery.</p></li>
<li><p><strong>stub</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><em>mtap.api.v1.events_pb2_grpc.EventsStub</em><em>]</em>) – An existing events service
client gRPC stub to use.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">EventsClient</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="s1">&#39;localhost:50000&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">,</span> \
<span class="gp">&gt;&gt;&gt; </span>     <span class="n">Event</span><span class="p">(</span><span class="n">event_id</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">)</span> <span class="k">as</span> <span class="n">event</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">document</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">create_document</span><span class="p">(</span><span class="n">document_name</span><span class="o">=</span><span class="s1">&#39;plaintext&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                                     <span class="n">text</span><span class="o">=</span><span class="s1">&#39;The quick brown fox jumps over the lazy dog.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="mtap.Event">
<em class="property">class </em><code class="sig-prename descclassname">mtap.</code><code class="sig-name descname">Event</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">event_id</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">client</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">only_create_new</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">default_adapters</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/events.html#Event"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.Event" title="Permalink to this definition">¶</a></dt>
<dd><p>An object for interacting with a specific event locally or on the events service.</p>
<p>The Event object functions as a map from string document names to <a class="reference internal" href="#mtap.Document" title="mtap.Document"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Document</span></code></a> objects that
can be used to access document data from the events server.</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – A globally-unique identifier for the event, or omit / none for a random UUID.</p></li>
<li><p><strong>client</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference internal" href="#mtap.EventsClient" title="mtap.EventsClient"><em>EventsClient</em></a>) – A client for an events service to push any changes to the event to.</p></li>
<li><p><strong>only_create_new</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Fails if the event already exists on the events service.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">EventsClient</span><span class="p">()</span> <span class="k">as</span> <span class="n">client</span><span class="p">,</span> <span class="n">Event</span><span class="p">(</span><span class="n">event_id</span><span class="o">=</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">)</span> <span class="k">as</span> <span class="n">event</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="c1"># use event</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="o">...</span>
</pre></div>
</div>
<dl class="py method">
<dt id="mtap.Event.event_id">
<em class="property">property </em><code class="sig-name descname">event_id</code><a class="headerlink" href="#mtap.Event.event_id" title="Permalink to this definition">¶</a></dt>
<dd><p>The globally unique identifier for this event.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.Event.documents">
<em class="property">property </em><code class="sig-name descname">documents</code><a class="headerlink" href="#mtap.Event.documents" title="Permalink to this definition">¶</a></dt>
<dd><p>A mutable mapping of strings to <a class="reference internal" href="#mtap.Document" title="mtap.Document"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Document</span></code></a>
objects that can be used to query and add documents to the event.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.MutableMapping" title="(in Python v3.8)">MutableMapping</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a>, <a class="reference internal" href="#mtap.Document" title="mtap.Document">Document</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.Event.metadata">
<em class="property">property </em><code class="sig-name descname">metadata</code><a class="headerlink" href="#mtap.Event.metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>A mutable mapping of strings to strings that can be
used to query and add metadata to the event.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.MutableMapping" title="(in Python v3.8)">MutableMapping</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.Event.binaries">
<em class="property">property </em><code class="sig-name descname">binaries</code><a class="headerlink" href="#mtap.Event.binaries" title="Permalink to this definition">¶</a></dt>
<dd><p>A mutable mapping of strings to bytes that can be used
to query and add binary data to the event.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.MutableMapping" title="(in Python v3.8)">MutableMapping</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.Event.created_indices">
<em class="property">property </em><code class="sig-name descname">created_indices</code><a class="headerlink" href="#mtap.Event.created_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>A mapping of document names to a list of the names
of all the label indices that have been added to that document</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.8)">Dict</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.8)">List</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.Event.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/events.html#Event.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.Event.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Closes this event. Lets the event service know that we are done with the event,
allowing to clean up the event if no other clients have open leases to it.</p>
</dd></dl>

<dl class="py method">
<dt id="mtap.Event.create_document">
<code class="sig-name descname">create_document</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">document_name</span></em>, <em class="sig-param"><span class="n">text</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/events.html#Event.create_document"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.Event.create_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a document to the event keyed by <cite>document_name</cite> and
containing the specified <cite>text</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>document_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The event-unique identifier for the document, example: ‘plaintext’.</p></li>
<li><p><strong>text</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The content of the document. This is a required field, document text is final and
immutable, as changing the text would very likely invalidate any labels on the
document.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The added document.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.Document" title="mtap.Document">Document</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.Event.add_document">
<code class="sig-name descname">add_document</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">document</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/events.html#Event.add_document"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.Event.add_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the document to this event, first uploading to events service if this event has a
client connection to the events service.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>document</strong> (<a class="reference internal" href="#mtap.Document" title="mtap.Document"><em>Document</em></a>) – The document to add to this event.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mtap.Document">
<em class="property">class </em><code class="sig-prename descclassname">mtap.</code><code class="sig-name descname">Document</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">document_name</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">text</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">event</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">default_adapters</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/events.html#Document"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.Document" title="Permalink to this definition">¶</a></dt>
<dd><p>An object for interacting with text and labels stored on an <a class="reference internal" href="#mtap.Event" title="mtap.Event"><code class="xref py py-class docutils literal notranslate"><span class="pre">Event</span></code></a>.</p>
<p>Documents are keyed by their name, and pipelines can store different pieces of
related text on a single processing event using multiple documents. An example would be storing
the text of one language on one document, and a translation on another, or storing the
rtf or html encoding on one document, and the parsed plaintext on another document.</p>
<p>Both the document text and any added label indices are immutable. This is to enable
parallelization and distribution of processing, and to prevent changes to the dependency graph
of label indices and text, which can make debugging difficult.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>document_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The document name identifier.</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>text</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – The document text, can be omitted if this is an existing document and text needs to be
retrieved from the events service.</p></li>
<li><p><strong>event</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference internal" href="#mtap.Event" title="mtap.Event"><em>Event</em></a><em>]</em>) – The parent event of this document. If the event has a client, then that client will be
used to share changes to this document with all other clients of the Events service. In
that case, text should only be specified if it is the known existing text of the
document.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Local document:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">document</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="s1">&#39;plaintext&#39;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Some document text.&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Existing distributed object:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">EventsClient</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="s1">&#39;localhost:8080&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">,</span> \
<span class="gp">&gt;&gt;&gt; </span>     <span class="n">Event</span><span class="p">(</span><span class="n">event_id</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">)</span> <span class="k">as</span> <span class="n">event</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">document</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">documents</span><span class="p">[</span><span class="s1">&#39;plaintext&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">document</span><span class="o">.</span><span class="n">text</span>
<span class="go">&#39;Some document text fetched from the server.&#39;</span>
</pre></div>
</div>
<p>New distributed object:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">EventsClient</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="s1">&#39;localhost:8080&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">,</span> \
<span class="gp">&gt;&gt;&gt; </span>     <span class="n">Event</span><span class="p">(</span><span class="n">event_id</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">)</span> <span class="k">as</span> <span class="n">event</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">document</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="s1">&#39;plaintext&#39;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Some document text.&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">event</span><span class="o">.</span><span class="n">add_document</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>
</pre></div>
</div>
<p>or</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">EventsClient</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="s1">&#39;localhost:8080&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">,</span> \
<span class="gp">&gt;&gt;&gt; </span>     <span class="n">Event</span><span class="p">(</span><span class="n">event_id</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">)</span> <span class="k">as</span> <span class="n">event</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">document</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">create_document</span><span class="p">(</span><span class="s1">&#39;plaintext&#39;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Some document text.&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt id="mtap.Document.event">
<em class="property">property </em><code class="sig-name descname">event</code><a class="headerlink" href="#mtap.Document.event" title="Permalink to this definition">¶</a></dt>
<dd><p>The parent event of this document.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.Event" title="mtap.Event">Event</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.Document.document_name">
<em class="property">property </em><code class="sig-name descname">document_name</code><a class="headerlink" href="#mtap.Document.document_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The unique identifier for this document on the event.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.Document.text">
<em class="property">property </em><code class="sig-name descname">text</code><a class="headerlink" href="#mtap.Document.text" title="Permalink to this definition">¶</a></dt>
<dd><p>The document text.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.Document.created_indices">
<em class="property">property </em><code class="sig-name descname">created_indices</code><a class="headerlink" href="#mtap.Document.created_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of all of the label index names that have created on this
document using a labeler either locally or by remote pipeline components invoked on
this document.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.8)">List</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.Document.get_label_index">
<code class="sig-name descname">get_label_index</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">label_index_name</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">label_adapter</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/events.html#Document.get_label_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.Document.get_label_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the document’s label index with the specified key.</p>
<p>Will fetch from the events service if it is not cached locally if the document has an event
with a client. Uses the <cite>label_adapter</cite> argument to perform unmarshalling from the proto
message if specified.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>label_index_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The name of the label index to get.</p></li>
<li><p><strong>label_adapter</strong> (<a class="reference internal" href="#mtap.events.ProtoLabelAdapter" title="mtap.events.ProtoLabelAdapter"><em>ProtoLabelAdapter</em></a>) – Deprecated, does not do anything.</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><p><strong>label_adapter</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference internal" href="#mtap.events.ProtoLabelAdapter" title="mtap.events.ProtoLabelAdapter"><em>ProtoLabelAdapter</em></a><em>]</em>) – The label adapter for the target type. If omitted <a class="reference internal" href="#mtap.GenericLabel" title="mtap.GenericLabel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GenericLabel</span></code></a> will be used.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The requested label index.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#mtap.label_indices.LabelIndex" title="mtap.label_indices.LabelIndex">LabelIndex</a></p>
</dd>
</dl>
<dl class="simple">
<dt>..deprecated:: 0.5</dt><dd><p>Use <code class="xref py py-func docutils literal notranslate"><span class="pre">Document.labels()</span></code> instead.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.Document.get_labeler">
<code class="sig-name descname">get_labeler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">label_index_name</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">distinct</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">label_adapter</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/events.html#Document.get_labeler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.Document.get_labeler" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a function that can be used to add labels to a label index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>label_index_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – A document-unique identifier for the label index to be created.</p></li>
<li><p><strong>distinct</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em>]</em>) – Optional, if using generic labels, whether to use distinct generic labels or
non-distinct generic labels, will default to False.</p></li>
<li><p><strong>label_adapter</strong> (<a class="reference internal" href="#mtap.events.ProtoLabelAdapter" title="mtap.events.ProtoLabelAdapter"><em>ProtoLabelAdapter</em></a>) – Deprecated, no longer does anything.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A callable when used in conjunction with the ‘with’ keyword will automatically
handle uploading any added labels to the server.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.events.Labeler" title="mtap.events.Labeler">Labeler</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">document</span><span class="o">.</span><span class="n">get_labeler</span><span class="p">(</span><span class="s1">&#39;sentences&#39;</span><span class="p">,</span> <span class="n">distinct</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">labeler</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">labeler</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="n">sentence_type</span><span class="o">=</span><span class="s1">&#39;STANDARD&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">sentence</span> <span class="o">=</span> <span class="n">labeler</span><span class="p">(</span><span class="mi">26</span><span class="p">,</span> <span class="mi">34</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">sentence</span><span class="o">.</span><span class="n">sentence_type</span> <span class="o">=</span> <span class="s1">&#39;FRAGMENT&#39;</span>
</pre></div>
</div>
<dl class="simple">
<dt>..deprecated:: 0.5</dt><dd><p><cite>label_adapter</cite> will be removed before 1.0, since that is handled by the default label
adapters set on the document / event.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.Document.add_labels">
<code class="sig-name descname">add_labels</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">label_index_name</span></em>, <em class="sig-param"><span class="n">labels</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">distinct</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">label_adapter</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/events.html#Document.add_labels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.Document.add_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>Skips using a labeler and adds the sequence of labels as a new label index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>label_index_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The name of the label index.</p></li>
<li><p><strong>labels</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.8)"><em>Sequence</em></a><em>[</em><a class="reference internal" href="#mtap.labels.Label" title="mtap.labels.Label"><em>Label</em></a><em>]</em>) – The labels to add.</p></li>
<li><p><strong>distinct</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em>]</em>) – Whether the index is distinct or non-distinct.</p></li>
<li><p><strong>label_adapter</strong> (<a class="reference internal" href="#mtap.events.ProtoLabelAdapter" title="mtap.events.ProtoLabelAdapter"><em>ProtoLabelAdapter</em></a>) – A label adapter to use.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The new label index created from the labels.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.label_indices.LabelIndex" title="mtap.label_indices.LabelIndex">LabelIndex</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mtap.events.Labeler">
<em class="property">class </em><code class="sig-prename descclassname">mtap.events.</code><code class="sig-name descname">Labeler</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwds</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/events.html#Labeler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.events.Labeler" title="Permalink to this definition">¶</a></dt>
<dd><p>Object provided by <a class="reference internal" href="#mtap.Document.get_labeler" title="mtap.Document.get_labeler"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_labeler()</span></code></a> which is responsible for adding labels
to a label index on a document.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>client</strong> (<a class="reference internal" href="#mtap.EventsClient" title="mtap.EventsClient"><em>EventsClient</em></a>) – Client to upload labels to events service when done.</p></li>
<li><p><strong>document</strong> (<a class="reference internal" href="#mtap.Document" title="mtap.Document"><em>Document</em></a>) – The parent document labels are being added to.</p></li>
<li><p><strong>label_index_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The label index name key.</p></li>
<li><p><strong>label_adapter</strong> (<a class="reference internal" href="#mtap.events.ProtoLabelAdapter" title="mtap.events.ProtoLabelAdapter"><em>ProtoLabelAdapter</em></a>) – The label adapter to perform marshalling from objects to proto messages.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="mtap.events.Labeler.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/events.html#Labeler.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.events.Labeler.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the constructor for the label type adding it to the list of labels to be uploaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – Arguments passed to the label type’s constructor.</p></li>
<li><p><strong>kwargs</strong> – Keyword arguments passed to the label type’s constructor.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The object that was created by the label type’s constructor.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.labels.Label" title="mtap.labels.Label">Label</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">labeler</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="n">some_field</span><span class="o">=</span><span class="s1">&#39;some_value&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="go">GenericLabel(start_index=0, end_index=25, some_field=&#39;some_value&#39;, x=3)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="mtap.events.Labeler.done">
<code class="sig-name descname">done</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/events.html#Labeler.done"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.events.Labeler.done" title="Permalink to this definition">¶</a></dt>
<dd><p>Finalizes the label index, uploads the added labels to the events service.</p>
<p>Normally called automatically on exit from a context manager block, but can be manually
invoked if the labeler is not used in a context manager block.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mtap.events.LabelIndexInfo">
<em class="property">class </em><code class="sig-prename descclassname">mtap.events.</code><code class="sig-name descname">LabelIndexInfo</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">index_name</span></em>, <em class="sig-param"><span class="n">type</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mtap.events.LabelIndexInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Information about a label index contained on a document.</p>
<dl class="py attribute">
<dt id="mtap.events.LabelIndexInfo.index_name">
<code class="sig-name descname">index_name</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a></em><a class="headerlink" href="#mtap.events.LabelIndexInfo.index_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the label index.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="mtap.events.LabelIndexInfo.type">
<code class="sig-name descname">type</code><em class="property">: <a class="reference internal" href="#mtap.events.LabelIndexType" title="mtap.events.LabelIndexType">mtap.events.LabelIndexType</a></em><a class="headerlink" href="#mtap.events.LabelIndexInfo.type" title="Permalink to this definition">¶</a></dt>
<dd><p>The type of the label index.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.events.LabelIndexType" title="mtap.events.LabelIndexType">LabelIndexType</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mtap.events.LabelIndexType">
<em class="property">class </em><code class="sig-prename descclassname">mtap.events.</code><code class="sig-name descname">LabelIndexType</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/events.html#LabelIndexType"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.events.LabelIndexType" title="Permalink to this definition">¶</a></dt>
<dd><p>The type of serialized labels contained in the label index.</p>
<dl class="py attribute">
<dt id="mtap.events.LabelIndexType.UNKNOWN">
<code class="sig-name descname">UNKNOWN</code><em class="property"> = 0</em><a class="headerlink" href="#mtap.events.LabelIndexType.UNKNOWN" title="Permalink to this definition">¶</a></dt>
<dd><p>Label index not set or type not known.</p>
</dd></dl>

<dl class="py attribute">
<dt id="mtap.events.LabelIndexType.GENERIC">
<code class="sig-name descname">GENERIC</code><em class="property"> = 1</em><a class="headerlink" href="#mtap.events.LabelIndexType.GENERIC" title="Permalink to this definition">¶</a></dt>
<dd><p>JSON / Generic Label index</p>
</dd></dl>

<dl class="py attribute">
<dt id="mtap.events.LabelIndexType.CUSTOM">
<code class="sig-name descname">CUSTOM</code><em class="property"> = 2</em><a class="headerlink" href="#mtap.events.LabelIndexType.CUSTOM" title="Permalink to this definition">¶</a></dt>
<dd><p>Other / custom protobuf label index</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="labels">
<h3><a class="toc-backref" href="#id6">Labels</a><a class="headerlink" href="#labels" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="mtap.labels.Label">
<em class="property">class </em><code class="sig-prename descclassname">mtap.labels.</code><code class="sig-name descname">Label</code><a class="reference internal" href="_modules/mtap/labels.html#Label"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.labels.Label" title="Permalink to this definition">¶</a></dt>
<dd><p>An abstract base class for a label of attributes on text.</p>
<dl class="py method">
<dt id="mtap.labels.Label.document">
<em class="property">abstract property </em><code class="sig-name descname">document</code><a class="headerlink" href="#mtap.labels.Label.document" title="Permalink to this definition">¶</a></dt>
<dd><p>The parent document this label appears on.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.Document" title="mtap.Document">Document</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.labels.Label.label_index_name">
<em class="property">abstract property </em><code class="sig-name descname">label_index_name</code><a class="headerlink" href="#mtap.labels.Label.label_index_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The label index this label appears on.</p>
</dd></dl>

<dl class="py method">
<dt id="mtap.labels.Label.identifier">
<em class="property">abstract property </em><code class="sig-name descname">identifier</code><a class="headerlink" href="#mtap.labels.Label.identifier" title="Permalink to this definition">¶</a></dt>
<dd><p>The index of the label within its label index.</p>
</dd></dl>

<dl class="py method">
<dt id="mtap.labels.Label.start_index">
<em class="property">abstract property </em><code class="sig-name descname">start_index</code><a class="headerlink" href="#mtap.labels.Label.start_index" title="Permalink to this definition">¶</a></dt>
<dd><p>The index of the first character of the text covered by this label.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.labels.Label.end_index">
<em class="property">abstract property </em><code class="sig-name descname">end_index</code><a class="headerlink" href="#mtap.labels.Label.end_index" title="Permalink to this definition">¶</a></dt>
<dd><p>The index after the last character of the text covered by this label.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.labels.Label.location">
<em class="property">property </em><code class="sig-name descname">location</code><a class="headerlink" href="#mtap.labels.Label.location" title="Permalink to this definition">¶</a></dt>
<dd><p>A tuple of (start_index, end_index) used to perform sorting and
comparison first based on start_index, then based on end_index.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.Location" title="mtap.Location">Location</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.labels.Label.text">
<em class="property">property </em><code class="sig-name descname">text</code><a class="headerlink" href="#mtap.labels.Label.text" title="Permalink to this definition">¶</a></dt>
<dd><p>The slice of document text covered by this label. Will retrieve from events server
if it is not cached locally.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.labels.Label.shallow_fields_equal">
<em class="property">abstract </em><code class="sig-name descname">shallow_fields_equal</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/labels.html#Label.shallow_fields_equal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.labels.Label.shallow_fields_equal" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests if the fields on this label and locations of references are the same as another
label.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> – The other label to test.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if all of the fields are equal and the references ar</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mtap.Location">
<em class="property">class </em><code class="sig-prename descclassname">mtap.</code><code class="sig-name descname">Location</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start_index</span></em>, <em class="sig-param"><span class="n">end_index</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/labels.html#Location"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.Location" title="Permalink to this definition">¶</a></dt>
<dd><p>A location in text, a tuple of (<cite>start_index</cite>, <cite>end_index</cite>).</p>
<p>Used to perform comparison of labels based on their locations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start_index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – The start index inclusive of the location in text.</p></li>
<li><p><strong>end_index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – The end index exclusive of the location in text.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="mtap.Location.start_index">
<code class="sig-name descname">start_index</code><a class="headerlink" href="#mtap.Location.start_index" title="Permalink to this definition">¶</a></dt>
<dd><p>The start index inclusive of the location in text.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="mtap.Location.end_index">
<code class="sig-name descname">end_index</code><a class="headerlink" href="#mtap.Location.end_index" title="Permalink to this definition">¶</a></dt>
<dd><p>The end index exclusive of the location in text.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.Location.covers">
<code class="sig-name descname">covers</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/labels.html#Location.covers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.Location.covers" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the span of text covered by this label completely overlaps the span of text
covered by the <code class="docutils literal notranslate"><span class="pre">other</span></code> label or location.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<em>Union</em><em>[</em><a class="reference internal" href="#mtap.Location" title="mtap.Location"><em>Location</em></a><em>, </em><a class="reference internal" href="#mtap.labels.Label" title="mtap.labels.Label"><em>Label</em></a><em>]</em>) – A location or label to compare against.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if <cite>other</cite> is completely overlapped/covered <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.Location.relative_to">
<code class="sig-name descname">relative_to</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">location</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/labels.html#Location.relative_to"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.Location.relative_to" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a location relative to the the same origin as <code class="docutils literal notranslate"><span class="pre">location</span></code> and makes it relative
to <code class="docutils literal notranslate"><span class="pre">location</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>location</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em> or </em><a class="reference internal" href="#mtap.Location" title="mtap.Location"><em>Location</em></a><em> or </em><a class="reference internal" href="#mtap.labels.Label" title="mtap.labels.Label"><em>Label</em></a>) – A location to relativize this location to.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Location</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sentence</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">token</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">token</span><span class="o">.</span><span class="n">relative_to</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>
<span class="go">Location(start_index=0, end_index=5)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="mtap.Location.offset_by">
<code class="sig-name descname">offset_by</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">location</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/labels.html#Location.offset_by"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.Location.offset_by" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a location by offsetting this location by an integer or the <code class="docutils literal notranslate"><span class="pre">start_index</span></code> of a
location / label. Derelativizes this location.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>location</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em> or </em><a class="reference internal" href="#mtap.Location" title="mtap.Location"><em>Location</em></a><em> or </em><a class="reference internal" href="#mtap.labels.Label" title="mtap.labels.Label"><em>Label</em></a>) – A location to offset this location by.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Location</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sentence</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">token_in_sentence</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">token_in_sentence</span><span class="o">.</span><span class="n">offset_by</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>
<span class="go">Location(start_index=10, end_index=15)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="mtap.label">
<code class="sig-prename descclassname">mtap.</code><code class="sig-name descname">label</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start_index</span></em>, <em class="sig-param"><span class="n">end_index</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">document</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/labels.html#label"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.label" title="Permalink to this definition">¶</a></dt>
<dd><p>An alias for <a class="reference internal" href="#mtap.GenericLabel" title="mtap.GenericLabel"><code class="xref py py-class docutils literal notranslate"><span class="pre">GenericLabel</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start_index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The index of the first character in text to be included in the label.</p></li>
<li><p><strong>end_index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The index after the last character in text to be included in the label.</p></li>
<li><p><strong>document</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#mtap.Document" title="mtap.Document"><em>Document</em></a><em>]</em>) – The parent document of the label. This will be
automatically set if a the label is created via labeler.</p></li>
<li><p><strong>**kwargs</strong> – Arbitrary, any other fields that should be added to the label, values must be
json-serializable.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="mtap.GenericLabel">
<em class="property">class </em><code class="sig-prename descclassname">mtap.</code><code class="sig-name descname">GenericLabel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start_index</span></em>, <em class="sig-param"><span class="n">end_index</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">identifier</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">document</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">label_index_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">fields</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">reference_field_ids</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/labels.html#GenericLabel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.GenericLabel" title="Permalink to this definition">¶</a></dt>
<dd><p>Default implementation of the Label class which uses a dictionary to store attributes.</p>
<p>Will be suitable for the majority of use cases for labels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start_index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The index of the first character in text to be included in the label.</p></li>
<li><p><strong>end_index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The index after the last character in text to be included in the label.</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>document</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference internal" href="#mtap.Document" title="mtap.Document"><em>Document</em></a><em>]</em>) – The parent document of the label. This will be
automatically set if a the label is created via labeler.</p></li>
<li><p><strong>**kwargs</strong> – Arbitrary, any other fields that should be added to the label, values must be
json-serializable.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pos_tag</span> <span class="o">=</span> <span class="n">pos_tag_labeler</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pos_tag</span><span class="o">.</span><span class="n">tag</span> <span class="o">=</span> <span class="s1">&#39;NNS&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pos_tag</span><span class="o">.</span><span class="n">tag</span>
<span class="go">&#39;NNS&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pos_tag2</span> <span class="o">=</span> <span class="n">pos_tag_labeler</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;VB&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pos_tag2</span><span class="o">.</span><span class="n">tag</span>
<span class="go">&#39;VB&#39;</span>
</pre></div>
</div>
<dl class="py method">
<dt id="mtap.GenericLabel.document">
<em class="property">property </em><code class="sig-name descname">document</code><a class="headerlink" href="#mtap.GenericLabel.document" title="Permalink to this definition">¶</a></dt>
<dd><p>The parent document this label appears on.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.Document" title="mtap.Document">Document</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.GenericLabel.label_index_name">
<em class="property">property </em><code class="sig-name descname">label_index_name</code><a class="headerlink" href="#mtap.GenericLabel.label_index_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The label index this label appears on.</p>
</dd></dl>

<dl class="py method">
<dt id="mtap.GenericLabel.identifier">
<em class="property">property </em><code class="sig-name descname">identifier</code><a class="headerlink" href="#mtap.GenericLabel.identifier" title="Permalink to this definition">¶</a></dt>
<dd><p>The index of the label within its label index.</p>
</dd></dl>

<dl class="py method">
<dt id="mtap.GenericLabel.start_index">
<em class="property">property </em><code class="sig-name descname">start_index</code><a class="headerlink" href="#mtap.GenericLabel.start_index" title="Permalink to this definition">¶</a></dt>
<dd><p>The index of the first character of the text covered by this label.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.GenericLabel.end_index">
<em class="property">property </em><code class="sig-name descname">end_index</code><a class="headerlink" href="#mtap.GenericLabel.end_index" title="Permalink to this definition">¶</a></dt>
<dd><p>The index after the last character of the text covered by this label.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.GenericLabel.shallow_fields_equal">
<code class="sig-name descname">shallow_fields_equal</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/labels.html#GenericLabel.shallow_fields_equal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.GenericLabel.shallow_fields_equal" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests if the fields on this label and locations of references are the same as another
label.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> – The other label to test.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if all of the fields are equal and the references ar</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="label-indices">
<h3><a class="toc-backref" href="#id7">Label Indices</a><a class="headerlink" href="#label-indices" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="mtap.label_index">
<code class="sig-prename descclassname">mtap.</code><code class="sig-name descname">label_index</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">labels</span></em>, <em class="sig-param"><span class="n">distinct</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">adapter</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/label_indices.html#label_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.label_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a label index from labels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>labels</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.8)"><em>List</em></a><em>[</em><em>L</em><em>]</em>) – Zero or more labels to create a label index from.</p></li>
<li><p><strong>distinct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether the label index is distinct or not.</p></li>
<li><p><strong>adapter</strong> (<a class="reference internal" href="#mtap.events.ProtoLabelAdapter" title="mtap.events.ProtoLabelAdapter"><em>ProtoLabelAdapter</em></a>) – The label adapter for these labels.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The newly created label index.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.label_indices.LabelIndex" title="mtap.label_indices.LabelIndex">LabelIndex</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mtap</span> <span class="kn">import</span> <span class="n">label_index</span><span class="p">,</span> <span class="n">label</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">label_index</span><span class="p">([</span><span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">6</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span>
<span class="go">label_index([GenericLabel(0, 5, x=1), GenericLabel(0, 10, x=2), GenericLabel(5, 10, x=3), GenericLabel(5, 15, x=5), GenericLabel(7, 10, x=4), GenericLabel(10, 15, x=6)], distinct=False)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="mtap.label_indices.LabelIndex">
<em class="property">class </em><code class="sig-prename descclassname">mtap.label_indices.</code><code class="sig-name descname">LabelIndex</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwds</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/label_indices.html#LabelIndex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.label_indices.LabelIndex" title="Permalink to this definition">¶</a></dt>
<dd><p>An immutable <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Sequence</span></code></a> of labels ordered by their location in text. By default
sorts by ascending <cite>start_index</cite> and then by ascending <cite>end_index</cite>.</p>
<dl class="py method">
<dt id="mtap.label_indices.LabelIndex.distinct">
<em class="property">abstract property </em><code class="sig-name descname">distinct</code><a class="headerlink" href="#mtap.label_indices.LabelIndex.distinct" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether this label index is distinct, i.e. all of the labels in it are
non-overlapping.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.label_indices.LabelIndex.filter">
<em class="property">abstract </em><code class="sig-name descname">filter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fn</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/label_indices.html#LabelIndex.filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.label_indices.LabelIndex.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters the label index according to a filter function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fn</strong> (<em>Callable</em><em>[</em><em>[</em><a class="reference internal" href="#mtap.labels.Label" title="mtap.labels.Label"><em>Label</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em>]</em>) – A filter function, returns <code class="docutils literal notranslate"><span class="pre">true</span></code> if the label
should be included, <code class="docutils literal notranslate"><span class="pre">false</span></code> if it should not be included</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A view of this label index.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.label_indices.LabelIndex" title="mtap.label_indices.LabelIndex">LabelIndex</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.label_indices.LabelIndex.at">
<em class="property">abstract </em><code class="sig-name descname">at</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">end</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/label_indices.html#LabelIndex.at"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.label_indices.LabelIndex.at" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the labels at the specified location in text.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>Union</em><em>[</em><a class="reference internal" href="#mtap.labels.Label" title="mtap.labels.Label"><em>Label</em></a><em>, </em><a class="reference internal" href="#mtap.Location" title="mtap.Location"><em>Location</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a><em>]</em>) – A label or location, or start index if <cite>end</cite>
is specified.</p></li>
<li><p><strong>end</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a><em>]</em>) – The exclusive end index of the location in text if it has
not been specified by a label.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A view of this label index.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.label_indices.LabelIndex" title="mtap.label_indices.LabelIndex">LabelIndex</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mtap</span> <span class="kn">import</span> <span class="n">label_index</span><span class="p">,</span> <span class="n">label</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">label_index</span><span class="p">([</span><span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="go">label_index([GenericLabel(0, 10, x=1), GenericLabel(0, 10, x=2)], distinct=False)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="mtap.label_indices.LabelIndex.covering">
<em class="property">abstract </em><code class="sig-name descname">covering</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">end</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/label_indices.html#LabelIndex.covering"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.label_indices.LabelIndex.covering" title="Permalink to this definition">¶</a></dt>
<dd><p>A label index containing all labels that cover / contain the specified location in text.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>Union</em><em>[</em><a class="reference internal" href="#mtap.labels.Label" title="mtap.labels.Label"><em>Label</em></a><em>, </em><a class="reference internal" href="#mtap.Location" title="mtap.Location"><em>Location</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a><em>]</em>) – A label or location, or start index if <cite>end</cite>
is specified.</p></li>
<li><p><strong>end</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a><em>]</em>) – The exclusive end index of the location in text if it has
not been specified by a label.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A view of this label index.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.label_indices.LabelIndex" title="mtap.label_indices.LabelIndex">LabelIndex</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mtap</span> <span class="kn">import</span> <span class="n">label_index</span><span class="p">,</span> <span class="n">label</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">label_index</span><span class="p">([</span><span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">6</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span><span class="o">.</span><span class="n">covering</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="go">label_index([GenericLabel(0, 10, x=2), GenericLabel(5, 10, x=3), GenericLabel(5, 15, x=5)], distinct=False)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="mtap.label_indices.LabelIndex.inside">
<em class="property">abstract </em><code class="sig-name descname">inside</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">end</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/label_indices.html#LabelIndex.inside"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.label_indices.LabelIndex.inside" title="Permalink to this definition">¶</a></dt>
<dd><p>A label index containing all labels that are inside the specified location in text.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>Union</em><em>[</em><a class="reference internal" href="#mtap.labels.Label" title="mtap.labels.Label"><em>Label</em></a><em>, </em><a class="reference internal" href="#mtap.Location" title="mtap.Location"><em>Location</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a><em>]</em>) – A label or location, or start index if
<cite>end</cite> is specified.</p></li>
<li><p><strong>end</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a><em>]</em>) – The exclusive end index of the location in text if it has
not been specified by a label.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A view of this label index.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.label_indices.LabelIndex" title="mtap.label_indices.LabelIndex">LabelIndex</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mtap</span> <span class="kn">import</span> <span class="n">label_index</span><span class="p">,</span> <span class="n">label</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">label_index</span><span class="p">([</span><span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">6</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span><span class="o">.</span><span class="n">inside</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="go">label_index([GenericLabel(5, 10, x=3), GenericLabel(7, 10, x=4)], distinct=False)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="mtap.label_indices.LabelIndex.beginning_inside">
<em class="property">abstract </em><code class="sig-name descname">beginning_inside</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">end</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/label_indices.html#LabelIndex.beginning_inside"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.label_indices.LabelIndex.beginning_inside" title="Permalink to this definition">¶</a></dt>
<dd><p>A label index containing all labels whose begin index is inside the specified location
in text.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>Union</em><em>[</em><a class="reference internal" href="#mtap.labels.Label" title="mtap.labels.Label"><em>Label</em></a><em>, </em><a class="reference internal" href="#mtap.Location" title="mtap.Location"><em>Location</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a><em>]</em>) – A label or location, or start index if <cite>end</cite>
is specified.</p></li>
<li><p><strong>end</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a><em>]</em>) – The exclusive end index of the location in text if it has
not been specified by a label.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A view of this label index.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.label_indices.LabelIndex" title="mtap.label_indices.LabelIndex">LabelIndex</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mtap</span> <span class="kn">import</span> <span class="n">label_index</span><span class="p">,</span> <span class="n">label</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">label_index</span><span class="p">([</span><span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">6</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span><span class="o">.</span><span class="n">beginning_inside</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>
<span class="go">label_index([GenericLabel(7, 10, x=4), GenericLabel(10, 15, x=6)], distinct=False)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="mtap.label_indices.LabelIndex.overlapping">
<em class="property">abstract </em><code class="sig-name descname">overlapping</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">end</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/label_indices.html#LabelIndex.overlapping"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.label_indices.LabelIndex.overlapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns all labels that overlap the specified location in text.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>Union</em><em>[</em><a class="reference internal" href="#mtap.labels.Label" title="mtap.labels.Label"><em>Label</em></a><em>, </em><a class="reference internal" href="#mtap.Location" title="mtap.Location"><em>Location</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a><em>]</em>) – A label or location, or start index if <cite>end</cite>
is specified.</p></li>
<li><p><strong>end</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a><em>]</em>) – The exclusive end index of the location in text if it has
not been specified by a label.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A view of this label index.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.label_indices.LabelIndex" title="mtap.label_indices.LabelIndex">LabelIndex</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mtap</span> <span class="kn">import</span> <span class="n">label_index</span><span class="p">,</span> <span class="n">label</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">label_index</span><span class="p">([</span><span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">6</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span><span class="o">.</span><span class="n">overlapping</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="go">label_index([GenericLabel(0, 10, x=2), GenericLabel(5, 10, x=3), GenericLabel(5, 15, x=5), GenericLabel(7, 10, x=4)], distinct=False)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="mtap.label_indices.LabelIndex.before">
<code class="sig-name descname">before</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/label_indices.html#LabelIndex.before"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.label_indices.LabelIndex.before" title="Permalink to this definition">¶</a></dt>
<dd><p>A label index containing all labels that are before a label’s location in text or
an index in text.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>x</strong> (<em>Union</em><em>[</em><a class="reference internal" href="#mtap.labels.Label" title="mtap.labels.Label"><em>Label</em></a><em>, </em><a class="reference internal" href="#mtap.Location" title="mtap.Location"><em>Location</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a><em>]</em>) – A label or location whose <cite>start_index</cite> will
be used, or a float index in text.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A view of this label index.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.label_indices.LabelIndex" title="mtap.label_indices.LabelIndex">LabelIndex</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mtap</span> <span class="kn">import</span> <span class="n">label_index</span><span class="p">,</span> <span class="n">label</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">label_index</span><span class="p">([</span><span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">6</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span><span class="o">.</span><span class="n">before</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="go">label_index([GenericLabel(0, 5, x=1)], distinct=False)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="mtap.label_indices.LabelIndex.after">
<code class="sig-name descname">after</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/label_indices.html#LabelIndex.after"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.label_indices.LabelIndex.after" title="Permalink to this definition">¶</a></dt>
<dd><p>A label index containing all labels that are after a label’s location in text
or an index in text.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>x</strong> (<em>Union</em><em>[</em><a class="reference internal" href="#mtap.labels.Label" title="mtap.labels.Label"><em>Label</em></a><em>, </em><a class="reference internal" href="#mtap.Location" title="mtap.Location"><em>Location</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a><em>]</em>) – A label or location whose <cite>end_index</cite> will
be used, or a float index in text.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A view of this label index.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.label_indices.LabelIndex" title="mtap.label_indices.LabelIndex">LabelIndex</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mtap</span> <span class="kn">import</span> <span class="n">label_index</span><span class="p">,</span> <span class="n">label</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">label_index</span><span class="p">([</span><span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">6</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="go">label_index([GenericLabel(7, 10, x=4), GenericLabel(10, 15, x=6)], distinct=False)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="mtap.label_indices.LabelIndex.ascending">
<em class="property">abstract </em><code class="sig-name descname">ascending</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/label_indices.html#LabelIndex.ascending"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.label_indices.LabelIndex.ascending" title="Permalink to this definition">¶</a></dt>
<dd><p>This label index sorted according to ascending start and end index.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A view of this label index.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#mtap.label_indices.LabelIndex" title="mtap.label_indices.LabelIndex">LabelIndex</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mtap</span> <span class="kn">import</span> <span class="n">label_index</span><span class="p">,</span> <span class="n">label</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">label_index</span><span class="p">([</span><span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">6</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">==</span> <span class="n">index</span><span class="o">.</span><span class="n">ascending</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="mtap.label_indices.LabelIndex.descending">
<em class="property">abstract </em><code class="sig-name descname">descending</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/label_indices.html#LabelIndex.descending"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.label_indices.LabelIndex.descending" title="Permalink to this definition">¶</a></dt>
<dd><p>This label index sorted according to descending start index and ascending end index.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A view of this label index.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#mtap.label_indices.LabelIndex" title="mtap.label_indices.LabelIndex">LabelIndex</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mtap</span> <span class="kn">import</span> <span class="n">label_index</span><span class="p">,</span> <span class="n">label</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">label_index</span><span class="p">([</span><span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">label</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">6</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span><span class="o">.</span><span class="n">descending</span><span class="p">()</span>
<span class="go">label_index([GenericLabel(10, 15, x=6), GenericLabel(7, 10, x=4), GenericLabel(5, 15, x=5), GenericLabel(5, 10, x=3), GenericLabel(0, 10, x=2), GenericLabel(0, 5, x=1)], distinct=False)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="custom-label-types">
<h3><a class="toc-backref" href="#id8">Custom Label Types</a><a class="headerlink" href="#custom-label-types" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="mtap.events.ProtoLabelAdapter">
<em class="property">class </em><code class="sig-prename descclassname">mtap.events.</code><code class="sig-name descname">ProtoLabelAdapter</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwds</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/events.html#ProtoLabelAdapter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.events.ProtoLabelAdapter" title="Permalink to this definition">¶</a></dt>
<dd><p>Responsible for marshalling and unmarshalling of label objects to and from proto messages.</p>
<dl class="py method">
<dt id="mtap.events.ProtoLabelAdapter.create_label">
<em class="property">abstract </em><code class="sig-name descname">create_label</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/events.html#ProtoLabelAdapter.create_label"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.events.ProtoLabelAdapter.create_label" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by labelers to create labels.</p>
<p>Should include the positional arguments <cite>start_index</cite> and <cite>end_index</cite>, because those are
required properties of labels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – Arbitrary args used to create the label.</p></li>
<li><p><strong>kwargs</strong> – Arbitrary keyword args used to create the label.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An object of the label type.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.labels.Label" title="mtap.labels.Label">Label</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.events.ProtoLabelAdapter.create_index_from_response">
<em class="property">abstract </em><code class="sig-name descname">create_index_from_response</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">response</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/events.html#ProtoLabelAdapter.create_index_from_response"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.events.ProtoLabelAdapter.create_index_from_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a LabelIndex from the response from an events service.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>response</strong> (<em>mtap.api.v1.events_pb2.GetLabelsResponse</em>) – The response protobuf message from
the events service.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A label index containing all the labels from the events service.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.label_indices.LabelIndex" title="mtap.label_indices.LabelIndex">LabelIndex</a>[L]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.events.ProtoLabelAdapter.create_index">
<em class="property">abstract </em><code class="sig-name descname">create_index</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">labels</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/events.html#ProtoLabelAdapter.create_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.events.ProtoLabelAdapter.create_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a LabelIndex from an iterable of label objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>labels</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.8)"><em>Iterable</em></a><em>[</em><em>L</em><em>]</em>) – Labels to put in index.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A label index containing all of the labels in the list.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.label_indices.LabelIndex" title="mtap.label_indices.LabelIndex">LabelIndex</a>[L]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.events.ProtoLabelAdapter.add_to_message">
<em class="property">abstract </em><code class="sig-name descname">add_to_message</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">labels</span></em>, <em class="sig-param"><span class="n">request</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/events.html#ProtoLabelAdapter.add_to_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.events.ProtoLabelAdapter.add_to_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a list of labels to a request to the event service to add labels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>labels</strong> (<em>Iterable</em><em>[</em><em>L</em><em>]</em>) – The list of labels that need to be sent to the server.</p></li>
<li><p><strong>request</strong> (<em>mtap.api.v1.events_pb2.AddLabelsRequest</em>) – The request proto message to add the
labels to.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.events.ProtoLabelAdapter.pack">
<em class="property">abstract </em><code class="sig-name descname">pack</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">index</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">include_label_text</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/events.html#ProtoLabelAdapter.pack"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.events.ProtoLabelAdapter.pack" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares to serialize a label index by transforming the label index into a representation
that can be dumped to json, yml, pickle, etc.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>index</strong> – The index itself.</p></li>
<li><p><strong>include_label_text</strong> – Whether to include the label’s text in the serialized representation
(for informative reasons).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary representation of the label index.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.events.ProtoLabelAdapter.unpack">
<em class="property">abstract </em><code class="sig-name descname">unpack</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">packed</span></em>, <em class="sig-param"><span class="n">label_index_name</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">document</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/events.html#ProtoLabelAdapter.unpack"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.events.ProtoLabelAdapter.unpack" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a packed, serializable object and turns it into a full label index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>packed</strong> (<em>Any</em>) – The packed representation.</p></li>
<li><p><strong>label_index_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The index name of the label index.</p></li>
<li><p><strong>document</strong> (<a class="reference internal" href="#mtap.Document" title="mtap.Document"><em>Document</em></a>) – The document this label index occurs on.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The label index.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.label_indices.LabelIndex" title="mtap.label_indices.LabelIndex">LabelIndex</a>[L]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.events.ProtoLabelAdapter.store_references">
<code class="sig-name descname">store_references</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">labels</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/events.html#ProtoLabelAdapter.store_references"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.events.ProtoLabelAdapter.store_references" title="Permalink to this definition">¶</a></dt>
<dd><p>Take all the references for the labels and turn them into static references.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>labels</strong> (<em>Sequence</em><em>[</em><em>L</em><em>]</em>) – The labels to store the references on.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="creating-processors">
<h3><a class="toc-backref" href="#id9">Creating Processors</a><a class="headerlink" href="#creating-processors" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="mtap.processing.base.Processor">
<em class="property">class </em><code class="sig-prename descclassname">mtap.processing.base.</code><code class="sig-name descname">Processor</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/base.html#Processor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.processing.base.Processor" title="Permalink to this definition">¶</a></dt>
<dd><p>Mixin used by all processor abstract base classes that provides the ability to update
serving status and use timers.</p>
<dl class="py method">
<dt id="mtap.processing.base.Processor.update_serving_status">
<code class="sig-name descname">update_serving_status</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">status</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/base.html#Processor.update_serving_status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.processing.base.Processor.update_serving_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the serving status of the processor for health checking.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>status</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – One of “SERVING”, “NOT_SERVING”, “UNKNOWN”.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.processing.base.Processor.custom_label_adapters">
<em class="property">property </em><code class="sig-name descname">custom_label_adapters</code><a class="headerlink" href="#mtap.processing.base.Processor.custom_label_adapters" title="Permalink to this definition">¶</a></dt>
<dd><p>Used to provide non-standard proto label adapters for specific index names.</p>
<p>Returns:</p>
</dd></dl>

<dl class="py method">
<dt id="mtap.processing.base.Processor.started_stopwatch">
<em class="property">static </em><code class="sig-name descname">started_stopwatch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/base.html#Processor.started_stopwatch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.processing.base.Processor.started_stopwatch" title="Permalink to this definition">¶</a></dt>
<dd><p>An object that can be used to time aspects of processing. The stopwatch will be started
at creation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The key to store the time under.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An object that is used to do the timing.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.processing.base.Stopwatch" title="mtap.processing.base.Stopwatch">Stopwatch</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># In a process method</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">started_stopwatch</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="c1"># do work</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="o">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="mtap.processing.base.Processor.unstarted_stopwatch">
<em class="property">static </em><code class="sig-name descname">unstarted_stopwatch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/base.html#Processor.unstarted_stopwatch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.processing.base.Processor.unstarted_stopwatch" title="Permalink to this definition">¶</a></dt>
<dd><p>An object that can be used to time aspects of processing. The stopwatch will be stopped
at creation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The key to store the time under.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An object that is used to do the timing.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.processing.base.Stopwatch" title="mtap.processing.base.Stopwatch">Stopwatch</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># In a process method</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">unstarted_stopwatch</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">stopwatch</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="c1"># work you don&#39;t want timed</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">stopwatch</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="c1"># work you do want timed</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">stopwatch</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mtap.processing.EventProcessor">
<em class="property">class </em><code class="sig-prename descclassname">mtap.processing.</code><code class="sig-name descname">EventProcessor</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/base.html#EventProcessor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.processing.EventProcessor" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract base class for an event processor.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">ExampleProcessor</span><span class="p">(</span><span class="n">EventProcessor</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
<span class="gp">... </span>         <span class="c1"># do work on the event</span>
<span class="gp">... </span>         <span class="o">...</span>
</pre></div>
</div>
<dl class="py method">
<dt id="mtap.processing.EventProcessor.process">
<em class="property">abstract </em><code class="sig-name descname">process</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">event</span></em>, <em class="sig-param"><span class="n">params</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/base.html#EventProcessor.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.processing.EventProcessor.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs processing on an event, implemented by the subclass.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event</strong> (<a class="reference internal" href="#mtap.Event" title="mtap.Event"><em>Event</em></a>) – The event object to be processed.</p></li>
<li><p><strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.8)"><em>Dict</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – Processing parameters. A dictionary of strings mapped to json-serializable values.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An arbitrary dictionary of strings mapped to json-serializable values which will be
returned to the caller, even remotely.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.8)">Dict</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a>, Any]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.processing.EventProcessor.default_adapters">
<code class="sig-name descname">default_adapters</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/base.html#EventProcessor.default_adapters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.processing.EventProcessor.default_adapters" title="Permalink to this definition">¶</a></dt>
<dd><p>Can be overridden to return a mapping from label index names to adapters that will then
be used in any documents or events provided to this processor’s process methods.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The mapping (dict-like) of label index names to
ProtoLabelAdapters to be used for those indices.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Mapping[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a>, <a class="reference internal" href="#mtap.events.ProtoLabelAdapter" title="mtap.events.ProtoLabelAdapter">ProtoLabelAdapter</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.processing.EventProcessor.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/base.html#EventProcessor.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.processing.EventProcessor.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Can be overridden for cleaning up anything that needs to be cleaned up. Will be called
by the framework after it’s done with the processor.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mtap.processing.DocumentProcessor">
<em class="property">class </em><code class="sig-prename descclassname">mtap.processing.</code><code class="sig-name descname">DocumentProcessor</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/base.html#DocumentProcessor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.processing.DocumentProcessor" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract base class for a document processor.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">ExampleProcessor</span><span class="p">(</span><span class="n">DocumentProcessor</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">document</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
<span class="gp">... </span>        <span class="c1"># do processing on document</span>
<span class="gp">... </span>        <span class="o">...</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">ExampleProcessor</span><span class="p">(</span><span class="n">DocumentProcessor</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">document</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
<span class="gp">... </span>         <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">started_stopwatch</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">):</span>
<span class="gp">... </span>              <span class="c1"># use stopwatch on something</span>
<span class="gp">... </span>              <span class="o">...</span>
</pre></div>
</div>
<dl class="py method">
<dt id="mtap.processing.DocumentProcessor.process_document">
<em class="property">abstract </em><code class="sig-name descname">process_document</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">document</span></em>, <em class="sig-param"><span class="n">params</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/base.html#DocumentProcessor.process_document"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.processing.DocumentProcessor.process_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs processing of a document on an event, implemented by the subclass.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>document</strong> (<a class="reference internal" href="#mtap.Document" title="mtap.Document"><em>Document</em></a>) – The document object to be processed.</p></li>
<li><p><strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.8)"><em>Dict</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – Processing parameters. A dictionary of strings mapped to json-serializable values.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An arbitrary dictionary of strings mapped to json-serializable values that will be
returned to the caller of the processor.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.8)">Dict</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a>, Any]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.processing.DocumentProcessor.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/base.html#DocumentProcessor.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.processing.DocumentProcessor.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Can be overridden for cleaning up anything that needs to be cleaned up. Will be called
by the framework after it’s done with the processor.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mtap.processing.base.Stopwatch">
<em class="property">class </em><code class="sig-prename descclassname">mtap.processing.base.</code><code class="sig-name descname">Stopwatch</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwds</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/base.html#Stopwatch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.processing.base.Stopwatch" title="Permalink to this definition">¶</a></dt>
<dd><p>A class for timing runtime of components and returning the total runtime with the
processor’s results.</p>
<dl class="py attribute">
<dt id="mtap.processing.base.Stopwatch.duration">
<code class="sig-name descname">duration</code><a class="headerlink" href="#mtap.processing.base.Stopwatch.duration" title="Permalink to this definition">¶</a></dt>
<dd><p>The amount of time elapsed for this timer.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.8)">timedelta</a></p>
</dd>
</dl>
</dd></dl>

<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># in an EventProcessor or DocumentProcessor process method call</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">started_stopwatch</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">timed_routine</span><span class="p">()</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># in an EventProcessor or DocumentProcessor process method call</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">unstarted_stopwatch</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">stopwatch</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="c1"># work you don&#39;t want timed</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">stopwatch</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="c1"># work you want timed</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">stopwatch</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py method">
<dt id="mtap.processing.base.Stopwatch.start">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/base.html#Stopwatch.start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.processing.base.Stopwatch.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts the timer.</p>
</dd></dl>

<dl class="py method">
<dt id="mtap.processing.base.Stopwatch.stop">
<code class="sig-name descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/base.html#Stopwatch.stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.processing.base.Stopwatch.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops / pauses the timer</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="processor-description-decorators">
<h3><a class="toc-backref" href="#id10">Processor Description Decorators</a><a class="headerlink" href="#processor-description-decorators" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="mtap.processor">
<code class="sig-prename descclassname">mtap.</code><code class="sig-name descname">processor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">human_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">description</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">parameters</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">inputs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">outputs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">additional_metadata</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/descriptions.html#processor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.processor" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator which attaches a service name and metadata to a processor. Which then can be used
for runtime reflection of how the processor works.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – <p>Identifying service name both for launching via command line and for service
registration.</p>
<p>Should be a mix of alphanumeric characters and dashes so that it plays nice with the
DNS name requirements of service discovery tools like Consul. Can be overridden at
runtime via the <cite>identifier</cite> option on <a class="reference internal" href="#mtap.processor_parser" title="mtap.processor_parser"><code class="xref py py-func docutils literal notranslate"><span class="pre">processor_parser()</span></code></a>.</p>
</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>human_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – An option human name for the processor.</p></li>
<li><p><strong>description</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – A short description of the processor and what it does.</p></li>
<li><p><strong>parameters</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.8)"><em>List</em></a><em>[</em><em>ParameterDescription</em><em>]</em><em>]</em>) – The processor’s parameters.</p></li>
<li><p><strong>inputs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.8)"><em>List</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em><em>]</em>) – <p>String identifiers for the output from a processor that this processor uses as an input.</p>
<p>Takes the format “[processor-name]/[output]”. Examples would be “tagger:pos_tags” or
“sentence-detector:sentences”.</p>
</p></li>
<li><p><strong>outputs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.8)"><em>List</em></a><em>[</em><em>LabelDescription</em><em>]</em><em>]</em>) – The label indices this processor outputs.</p></li>
<li><p><strong>**additional_metadata</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.8)"><em>Any</em></a>) – Any other data that should be added to the processor’s metadata, should be serializable
to yaml and json.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A decorator to be applied to instances of EventProcessor or DocumentProcessor. This
decorator attaches the metadata so it can be reflected at runtime.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mtap.processing</span> <span class="kn">import</span> <span class="n">EventProcessor</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@processor</span><span class="p">(</span><span class="s1">&#39;example-text-converter&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">TextConverter</span><span class="p">(</span><span class="n">EventProcessor</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="o">...</span>
</pre></div>
</div>
<p>or</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mtap.processing</span> <span class="kn">import</span> <span class="n">DocumentProcessor</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@processor</span><span class="p">(</span><span class="s1">&#39;example-sentence-detector&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">SentenceDetector</span><span class="p">(</span><span class="n">DocumentProcessor</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="o">...</span>
</pre></div>
</div>
<p>From our own example processor:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mtap.processing</span> <span class="kn">import</span> <span class="n">DocumentProcessor</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@processor</span><span class="p">(</span><span class="s1">&#39;mtap-example-processor-python&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>           <span class="n">human_name</span><span class="o">=</span><span class="s2">&quot;Python Example Processor&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>           <span class="n">description</span><span class="o">=</span><span class="s2">&quot;counts the number of times the letters a and b occur in a document&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>           <span class="n">parameters</span><span class="o">=</span><span class="p">[</span>
<span class="gp">&gt;&gt;&gt; </span>               <span class="n">parameter</span><span class="p">(</span><span class="s1">&#39;do_work&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">data_type</span><span class="o">=</span><span class="s1">&#39;bool&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                         <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether the processor should do anything.&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>           <span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>           <span class="n">outputs</span><span class="o">=</span><span class="p">[</span>
<span class="gp">&gt;&gt;&gt; </span>               <span class="n">label_index</span><span class="p">(</span><span class="s1">&#39;mtap.examples.letter_counts&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                           <span class="n">properties</span><span class="o">=</span><span class="p">[</span><span class="n">label_property</span><span class="p">(</span><span class="s1">&#39;letter&#39;</span><span class="p">,</span> <span class="n">data_type</span><span class="o">=</span><span class="s1">&#39;str&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>                                       <span class="n">label_property</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="n">data_type</span><span class="o">=</span><span class="s1">&#39;int&#39;</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span>           <span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">ExampleProcessor</span><span class="p">(</span><span class="n">DocumentProcessor</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="o">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="mtap.processing.descriptions.parameter">
<code class="sig-prename descclassname">mtap.processing.descriptions.</code><code class="sig-name descname">parameter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">required</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">data_type</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">description</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/descriptions.html#parameter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.processing.descriptions.parameter" title="Permalink to this definition">¶</a></dt>
<dd><p>A description of one of the processor’s parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The parameter name / key.</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>required</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether the processor parameter is required.</p></li>
<li><p><strong>data_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – The data type of the parameter. str, float, or bool; List[T] or Mapping[T1, T2] of
those.</p></li>
<li><p><strong>description</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – A short description of the property and what it does.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The parameter description object</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>ParameterDescription</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mtap.processing.descriptions.label_index">
<code class="sig-prename descclassname">mtap.processing.descriptions.</code><code class="sig-name descname">label_index</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">reference</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">optional</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">name_from_parameter</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">description</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">properties</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/descriptions.html#label_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.processing.descriptions.label_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a description for a label type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The label index name.</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>reference</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – If this is an output of another processor, that processor’s name followed by a slash
and the default output name of the index go here.
Example: “sentence-detector/sentences”.</p></li>
<li><p><strong>optional</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether this label index is an optional input or output.</p></li>
<li><p><strong>name_from_parameter</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – If the label index gets its name from a processor parameter, the name of the parameter.</p></li>
<li><p><strong>description</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – A short description of the label index.</p></li>
<li><p><strong>properties</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.8)"><em>List</em></a><em>[</em><em>PropertyDescription</em><em>]</em><em>]</em>) – The properties of the labels in the label index.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An object describing a label index.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>LabelDescription</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mtap.processing.descriptions.label_property">
<code class="sig-prename descclassname">mtap.processing.descriptions.</code><code class="sig-name descname">label_property</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">nullable</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">description</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">data_type</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/descriptions.html#label_property"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.processing.descriptions.label_property" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a description for a property on a label.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The property’s name.</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>nullable</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether the property can have a valid value of null.</p></li>
<li><p><strong>description</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – A short description of the property.</p></li>
<li><p><strong>data_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – The data type of the property: str, float, or bool; List[T] or Mapping[T1, T2] of those.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An object describing a label’s property.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>PropertyDescription</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="running-services">
<h3><a class="toc-backref" href="#id11">Running Services</a><a class="headerlink" href="#running-services" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="mtap.processor_parser">
<code class="sig-prename descclassname">mtap.</code><code class="sig-name descname">processor_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/service.html#processor_parser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.processor_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>An <a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArgumentParser</span></code></a> that can be used to parse the settings for
<a class="reference internal" href="#mtap.run_processor" title="mtap.run_processor"><code class="xref py py-func docutils literal notranslate"><span class="pre">run_processor()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A parser containing server settings.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser" title="(in Python v3.8)">ArgumentParser</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Using this as a parent parser:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span> <span class="o">=</span> <span class="n">ArgumentParser</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="n">processor_parser</span><span class="p">()])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--my-arg-1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--my-arg-2&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processor</span> <span class="o">=</span> <span class="n">MyProcessor</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">my_arg_1</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">my_arg_2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">run_processor</span><span class="p">(</span><span class="n">processor</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="mtap.run_processor">
<code class="sig-prename descclassname">mtap.</code><code class="sig-name descname">run_processor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">proc</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">namespace</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">args</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/service.html#run_processor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.run_processor" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the processor as a GRPC service, blocking until an interrupt signal is received.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>proc</strong> (<a class="reference internal" href="#mtap.processing.EventProcessor" title="mtap.processing.EventProcessor"><em>EventProcessor</em></a>) – The processor to host.</p></li>
<li><p><strong>namespace</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.Namespace" title="(in Python v3.8)"><em>Namespace</em></a><em>]</em>) – The parsed arguments from the parser
returned by <a class="reference internal" href="#mtap.processor_parser" title="mtap.processor_parser"><code class="xref py py-func docutils literal notranslate"><span class="pre">processor_parser()</span></code></a>.</p></li>
<li><p><strong>args</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.8)"><em>Sequence</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em><em>]</em>) – Arguments to parse server settings from if
<code class="docutils literal notranslate"><span class="pre">namespace</span></code> was not supplied.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Will automatically parse arguments:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">run_processor</span><span class="p">(</span><span class="n">MyProcessor</span><span class="p">())</span>
</pre></div>
</div>
<p>Manual arguments:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">run_processor</span><span class="p">(</span><span class="n">MyProcessor</span><span class="p">(),</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;-p&#39;</span><span class="p">,</span> <span class="s1">&#39;8080&#39;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="mtap.EventsServer">
<em class="property">class </em><code class="sig-prename descclassname">mtap.</code><code class="sig-name descname">EventsServer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">host</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">port</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">register</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">workers</span><span class="o">=</span><span class="default_value">10</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/_events_service.html#EventsServer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.EventsServer" title="Permalink to this definition">¶</a></dt>
<dd><p>Server which hosts events.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>host</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The address / hostname / IP to host the server on.</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>port</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The port to host the server on.</p></li>
<li><p><strong>register</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether to register the service with service discovery.</p></li>
<li><p><strong>workers</strong> – The number of workers that should handle requests.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="mtap.EventsServer.port">
<em class="property">property </em><code class="sig-name descname">port</code><a class="headerlink" href="#mtap.EventsServer.port" title="Permalink to this definition">¶</a></dt>
<dd><p>The port the processor service is bound to.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.EventsServer.start">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/_events_service.html#EventsServer.start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.EventsServer.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts the service.</p>
</dd></dl>

<dl class="py method">
<dt id="mtap.EventsServer.stop">
<code class="sig-name descname">stop</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">grace</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/_events_service.html#EventsServer.stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.EventsServer.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>De-registers (if registered with service discovery) the service and immediately stops
accepting requests, completely stopping the service after a specified <cite>grace</cite> time.</p>
<p>During the grace period the server will continue to process existing requests, but it will
not accept any new requests. This function is idempotent, multiple calls will shutdown
the server after the soonest grace to expire, calling the shutdown event for all calls to
this function.</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments</dt>
<dd class="field-odd"><p><strong>grace</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a><em>]</em>) – The grace period in seconds that the server should continue processing requests
before shutdown.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A shutdown event for the server.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/threading.html#threading.Event" title="(in Python v3.8)">threading.Event</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mtap.ProcessorServer">
<em class="property">class </em><code class="sig-prename descclassname">mtap.</code><code class="sig-name descname">ProcessorServer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">proc</span></em>, <em class="sig-param"><span class="n">host</span></em>, <em class="sig-param"><span class="n">port</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">register</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">events_address</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">processor_id</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">workers</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">params</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/service.html#ProcessorServer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.ProcessorServer" title="Permalink to this definition">¶</a></dt>
<dd><p>Host a MTAP processor as a service.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>proc</strong> (<a class="reference internal" href="#mtap.processing.EventProcessor" title="mtap.processing.EventProcessor"><em>EventProcessor</em></a>) – The event processor to host.</p></li>
<li><p><strong>host</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The address / hostname / IP to host the server on.</p></li>
<li><p><strong>port</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The port to host the server on, or 0 to use a random port.</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>register</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em>]</em>) – Whether to register the processor with service discovery.</p></li>
<li><p><strong>events_address</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – The address of the events server, or omitted / None if the events service should be
discovered.</p></li>
<li><p><strong>processor_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – The identifier to register the processor under, if omitted the processor name will be
used.</p></li>
<li><p><strong>workers</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>]</em>) – The number of workers that should handle requests. Defaults to 10.</p></li>
<li><p><strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.8)"><em>Mapping</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.8)"><em>Any</em></a><em>]</em>) – A set of default parameters that will be passed to the processor every time it runs.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="mtap.ProcessorServer.port">
<em class="property">property </em><code class="sig-name descname">port</code><a class="headerlink" href="#mtap.ProcessorServer.port" title="Permalink to this definition">¶</a></dt>
<dd><p>Port the hosted server is bound to.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.ProcessorServer.start">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/service.html#ProcessorServer.start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.ProcessorServer.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts the service.</p>
</dd></dl>

<dl class="py method">
<dt id="mtap.ProcessorServer.stop">
<code class="sig-name descname">stop</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">grace</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/service.html#ProcessorServer.stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.ProcessorServer.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>De-registers (if registered with service discovery) the service and immediately stops
accepting requests, completely stopping the service after a specified <cite>grace</cite> time.</p>
<p>During the grace period the server will continue to process existing requests, but it will
not accept any new requests. This function is idempotent, multiple calls will shutdown
the server after the soonest grace to expire, calling the shutdown event for all calls to
this function.</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments</dt>
<dd class="field-odd"><p><strong>grace</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a><em>]</em>) – The grace period that the server should continue processing requests for shutdown.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A shutdown event for the server.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/threading.html#threading.Event" title="(in Python v3.8)">threading.Event</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="running-a-pipeline">
<h3><a class="toc-backref" href="#id12">Running a pipeline</a><a class="headerlink" href="#running-a-pipeline" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="mtap.Pipeline">
<em class="property">class </em><code class="sig-prename descclassname">mtap.</code><code class="sig-name descname">Pipeline</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwds</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/pipeline.html#Pipeline"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.Pipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>An object which can be used to build and run a pipeline of remote and local processors.</p>
<p>Pipelines are a <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.MutableSequence" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MutableSequence</span></code></a> containing
one or more <a class="reference internal" href="#mtap.processing.pipeline.ComponentDescriptor" title="mtap.processing.pipeline.ComponentDescriptor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ComponentDescriptor</span></code></a>,
a pipeline can be modified after creation using this functionality.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>*components</strong> (<a class="reference internal" href="#mtap.processing.pipeline.ComponentDescriptor" title="mtap.processing.pipeline.ComponentDescriptor"><em>ComponentDescriptor</em></a>) – A list of component descriptors created using <a class="reference internal" href="#mtap.RemoteProcessor" title="mtap.RemoteProcessor"><code class="xref py py-class docutils literal notranslate"><span class="pre">RemoteProcessor</span></code></a> or
<a class="reference internal" href="#mtap.LocalProcessor" title="mtap.LocalProcessor"><code class="xref py py-class docutils literal notranslate"><span class="pre">LocalProcessor</span></code></a>.</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – An optional name for the pipeline, defaults to ‘pipeline’.</p></li>
<li><p><strong>config</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference internal" href="#mtap.Config" title="mtap.Config"><em>Config</em></a><em>]</em>) – An optional config override.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Remote pipeline with name discovery:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">mtap</span><span class="o">.</span><span class="n">Events</span><span class="p">()</span> <span class="k">as</span> <span class="n">events</span><span class="p">,</span> <span class="n">mtap</span><span class="o">.</span><span class="n">Pipeline</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">RemoteProcessor</span><span class="p">(</span><span class="s1">&#39;processor-1-id&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">RemoteProcessor</span><span class="p">(</span><span class="s1">&#39;processor-2-id&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">RemoteProcessor</span><span class="p">(</span><span class="s1">&#39;processor-3-id&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">)</span> <span class="k">as</span> <span class="n">pipeline</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">for</span> <span class="n">txt</span> <span class="ow">in</span> <span class="n">txts</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">with</span> <span class="n">events</span><span class="o">.</span><span class="n">open_event</span><span class="p">()</span> <span class="k">as</span> <span class="n">event</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="n">document</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">add_document</span><span class="p">(</span><span class="s1">&#39;plaintext&#39;</span><span class="p">,</span> <span class="n">txt</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="n">results</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>
</pre></div>
</div>
<p>Remote pipeline using addresses:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">mtap</span><span class="o">.</span><span class="n">Events</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="s1">&#39;localhost:50051&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">events</span><span class="p">,</span> <span class="n">mtap</span><span class="o">.</span><span class="n">Pipeline</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">RemoteProcessor</span><span class="p">(</span><span class="s1">&#39;processor-1-name&#39;</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s1">&#39;localhost:50052&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">RemoteProcessor</span><span class="p">(</span><span class="s1">&#39;processor-2-id&#39;</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s1">&#39;localhost:50053&#39;</span><span class="p">),</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">RemoteProcessor</span><span class="p">(</span><span class="s1">&#39;processor-3-id&#39;</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s1">&#39;localhost:50054&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">)</span> <span class="k">as</span> <span class="n">pipeline</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">for</span> <span class="n">txt</span> <span class="ow">in</span> <span class="n">txts</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">event</span> <span class="o">=</span> <span class="n">events</span><span class="o">.</span><span class="n">open_event</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">document</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">add_document</span><span class="p">(</span><span class="s1">&#39;plaintext&#39;</span><span class="p">,</span> <span class="n">txt</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">results</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>
</pre></div>
</div>
<p>Modifying pipeline</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pipeline</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">RemoteProcessor</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s1">&#39;localhost:50000&#39;</span><span class="p">),</span>
<span class="go">                        RemoteProcessor(&#39;bar&#39;, address=&#39;localhost:50000&#39;))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipeline</span>
<span class="go">Pipeline(RemoteProcessor(processor_id=&#39;foo&#39;, address=&#39;localhost:50000&#39;, component_id=None, params=None),</span>
<span class="go">         RemoteProcessor(processor_id=&#39;bar&#39;, address=&#39;localhost:50000&#39;, component_id=None, params=None))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipeline</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">RemoteProcessor</span><span class="p">(</span><span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s1">&#39;localhost:50001&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipeline</span>
<span class="go">Pipeline(RemoteProcessor(processor_id=&#39;foo&#39;, address=&#39;localhost:50000&#39;, component_id=None, params=None),</span>
<span class="go">         RemoteProcessor(processor_id=&#39;bar&#39;, address=&#39;localhost:50000&#39;, component_id=None, params=None),</span>
<span class="go">         RemoteProcessor(processor_id=&#39;baz&#39;, address=&#39;localhost:50001&#39;, component_id=None, params=None))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">pipeline</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipeline</span>
<span class="go">Pipeline(RemoteProcessor(processor_id=&#39;foo&#39;, address=&#39;localhost:50000&#39;, component_id=None, params=None),</span>
<span class="go">         RemoteProcessor(processor_id=&#39;baz&#39;, address=&#39;localhost:50001&#39;, component_id=None, params=None))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipeline</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">RemoteProcessor</span><span class="p">(</span><span class="n">processor_id</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="s1">&#39;localhost:50003&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipeline</span>
<span class="go">Pipeline(RemoteProcessor(processor_id=&#39;foo&#39;, address=&#39;localhost:50000&#39;, component_id=None, params=None),</span>
<span class="go">         RemoteProcessor(processor_id=&#39;bar&#39;, address=&#39;localhost:50003&#39;, component_id=None, params=None))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipeline</span> <span class="o">+=</span> <span class="nb">list</span><span class="p">(</span><span class="n">pipeline</span><span class="p">)</span>  <span class="c1"># Putting in a new list to prevent an infinite recursion</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipeline</span>
<span class="go">Pipeline(RemoteProcessor(processor_id=&#39;foo&#39;, address=&#39;localhost:50000&#39;, component_id=None, params=None),</span>
<span class="go">         RemoteProcessor(processor_id=&#39;bar&#39;, address=&#39;localhost:50003&#39;, component_id=None, params=None),</span>
<span class="go">         RemoteProcessor(processor_id=&#39;foo&#39;, address=&#39;localhost:50000&#39;, component_id=None, params=None),</span>
<span class="go">         RemoteProcessor(processor_id=&#39;bar&#39;, address=&#39;localhost:50003&#39;, component_id=None, params=None))</span>
</pre></div>
</div>
<dl class="py attribute">
<dt id="mtap.Pipeline.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#mtap.Pipeline.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The pipeline’s name.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.Pipeline.run_multithread">
<code class="sig-name descname">run_multithread</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">source</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">params</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">progress</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">total</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">close_events</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">max_failures</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">n_threads</span><span class="o">=</span><span class="default_value">4</span></em>, <em class="sig-param"><span class="n">read_ahead</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/pipeline.html#Pipeline.run_multithread"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.Pipeline.run_multithread" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs this pipeline on a source which provides multiple documents / events.</p>
<p>Concurrency is per-event, with each event being provided a thread which runs it through the
pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.8)"><em>Iterable</em></a><em>[</em><em>Union</em><em>[</em><a class="reference internal" href="#mtap.Event" title="mtap.Event"><em>Event</em></a><em>, </em><a class="reference internal" href="#mtap.Document" title="mtap.Document"><em>Document</em></a><em>]</em><em>]</em>) – A generator of events or documents to process.</p></li>
<li><p><strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – Json object containing params specific to processing this event, the existing params
dictionary defined in <code class="xref py py-func docutils literal notranslate"><span class="pre">add_processor()</span></code> will be updated with
the contents of this dict.</p></li>
<li><p><strong>progress</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether to print a progress bar using tqdm.</p></li>
<li><p><strong>total</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>]</em>) – An optional argument indicating the total number of events / documents that will be
provided by the iterable, for the progress bar.</p></li>
<li><p><strong>close_events</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether the pipeline should close events after they have been fully processed
through all components.</p></li>
<li><p><strong>max_failures</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The maximum number of failures</p></li>
<li><p><strong>n_threads</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The number of threads to process documents on.</p></li>
<li><p><strong>read_ahead</strong> – The number of source documents to read ahead into memory before processing.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A future which returns a tuple, the a list of ProcessingResult objects for
all the processors and the event that was processed.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Future</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">docs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;abc/&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;*.txt&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">document_source</span><span class="p">():</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">docs</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">with</span> <span class="n">path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="n">txt</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">with</span> <span class="n">Event</span><span class="p">(</span><span class="n">event_id</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">)</span> <span class="k">as</span> <span class="n">event</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="n">doc</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">create_document</span><span class="p">(</span><span class="s1">&#39;plaintext&#39;</span><span class="p">,</span> <span class="n">txt</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="k">yield</span> <span class="n">doc</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipeline</span><span class="o">.</span><span class="n">run_multithread</span><span class="p">(</span><span class="n">document_source</span><span class="p">(),</span> <span class="n">total</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">docs</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="mtap.Pipeline.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">target</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">params</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/pipeline.html#Pipeline.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.Pipeline.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Processes the event/document using all of the processors in the pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> (<em>Union</em><em>[</em><a class="reference internal" href="#mtap.Event" title="mtap.Event"><em>Event</em></a><em>, </em><a class="reference internal" href="#mtap.Document" title="mtap.Document"><em>Document</em></a><em>]</em>) – Either an event or a document to process.</p></li>
<li><p><strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – Json object containing params specific to processing this event, the existing params
dictionary defined in <code class="xref py py-func docutils literal notranslate"><span class="pre">add_processor()</span></code> will be updated with
the contents of this dict.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The results of all the processors in the pipeline.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)">list</a>[<a class="reference internal" href="#mtap.processing.ProcessingResult" title="mtap.processing.ProcessingResult">ProcessingResult</a>]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>The statement</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pipeline</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>
</pre></div>
</div>
<p>with a document parameter is an alias for</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pipeline</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">event</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;document_name&#39;</span><span class="p">:</span> <span class="n">document</span><span class="o">.</span><span class="n">document_name</span><span class="p">})</span>
</pre></div>
</div>
<p>The ‘document_name’ param is used to indicate to <a class="reference internal" href="#mtap.processing.DocumentProcessor" title="mtap.processing.DocumentProcessor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DocumentProcessor</span></code></a>
which document on the event to process.</p>
</dd></dl>

<dl class="py method">
<dt id="mtap.Pipeline.processor_timer_stats">
<code class="sig-name descname">processor_timer_stats</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/pipeline.html#Pipeline.processor_timer_stats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.Pipeline.processor_timer_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the timing information for all processors.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of timing info objects, one for each processor, in the same order
that the processors were added to the pipeline.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)">list</a>[<a class="reference internal" href="#mtap.processing.AggregateTimingInfo" title="mtap.processing.AggregateTimingInfo">AggregateTimingInfo</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.Pipeline.pipeline_timer_stats">
<code class="sig-name descname">pipeline_timer_stats</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/pipeline.html#Pipeline.pipeline_timer_stats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.Pipeline.pipeline_timer_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>The aggregated statistics for the global runtime of the pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The timing stats for the global runtime of the pipeline.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#mtap.processing.AggregateTimingInfo" title="mtap.processing.AggregateTimingInfo">AggregateTimingInfo</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.Pipeline.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/pipeline.html#Pipeline.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.Pipeline.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Closes any open connections to remote processors.</p>
</dd></dl>

<dl class="py method">
<dt id="mtap.Pipeline.as_processor">
<code class="sig-name descname">as_processor</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/pipeline.html#Pipeline.as_processor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.Pipeline.as_processor" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the pipeline as a processor.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An event processor that can be added to other pipelines or hosted.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#mtap.processing.EventProcessor" title="mtap.processing.EventProcessor">EventProcessor</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.Pipeline.print_times">
<code class="sig-name descname">print_times</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/pipeline.html#Pipeline.print_times"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.Pipeline.print_times" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints all of the times collected during this pipeline using <a class="reference external" href="https://docs.python.org/3/library/functions.html#print" title="(in Python v3.8)"><code class="xref py py-func docutils literal notranslate"><span class="pre">print()</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mtap.processing.pipeline.ComponentDescriptor">
<em class="property">class </em><code class="sig-prename descclassname">mtap.processing.pipeline.</code><code class="sig-name descname">ComponentDescriptor</code><a class="reference internal" href="_modules/mtap/processing/pipeline.html#ComponentDescriptor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.processing.pipeline.ComponentDescriptor" title="Permalink to this definition">¶</a></dt>
<dd><p>A component descriptor describes either a local or remote pipeline component and what the
pipeline needs to do to call the component.</p>
</dd></dl>

<dl class="py class">
<dt id="mtap.RemoteProcessor">
<em class="property">class </em><code class="sig-prename descclassname">mtap.</code><code class="sig-name descname">RemoteProcessor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">processor_id</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">address</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">component_id</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">params</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/pipeline.html#RemoteProcessor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.RemoteProcessor" title="Permalink to this definition">¶</a></dt>
<dd><p>A <code class="docutils literal notranslate"><span class="pre">ComponentDescriptor</span></code> for a remote processor that the pipeline will connect to in order
to perform processing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>processor_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The identifier used for health checking and discovery.</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>address</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – Optionally an address to use, will use service discovery configuration to locate
processors if this is None / omitted.</p></li>
<li><p><strong>component_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – How the processor’s results will be identified locally. Will be modified to be unique
if it is not unique relative to other component in a pipeline.</p></li>
<li><p><strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a><em>, </em><em>Any</em><em>]</em>) – An optional parameter dictionary that will be passed to the processor as parameters
with every event or document processed. Values should be json-serializable.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="mtap.RemoteProcessor.processor_id">
<code class="sig-name descname">processor_id</code><a class="headerlink" href="#mtap.RemoteProcessor.processor_id" title="Permalink to this definition">¶</a></dt>
<dd><p>The identifier used for health checking and discovery.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="mtap.RemoteProcessor.address">
<code class="sig-name descname">address</code><a class="headerlink" href="#mtap.RemoteProcessor.address" title="Permalink to this definition">¶</a></dt>
<dd><p>Optionally an address to use, will use service discovery configuration to locate
processors if this is None / omitted.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="mtap.RemoteProcessor.component_id">
<code class="sig-name descname">component_id</code><a class="headerlink" href="#mtap.RemoteProcessor.component_id" title="Permalink to this definition">¶</a></dt>
<dd><p>How the processor’s results will be identified locally. Will be modified to be unique
if it is not unique relative to other component in a pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="mtap.RemoteProcessor.params">
<code class="sig-name descname">params</code><a class="headerlink" href="#mtap.RemoteProcessor.params" title="Permalink to this definition">¶</a></dt>
<dd><p>An optional parameter dictionary that will be passed to the processor as parameters
with every event or document processed. Values should be json-serializable.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)">dict</a>, Any]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mtap.LocalProcessor">
<em class="property">class </em><code class="sig-prename descclassname">mtap.</code><code class="sig-name descname">LocalProcessor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">proc</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">component_id</span></em>, <em class="sig-param"><span class="n">client</span></em>, <em class="sig-param"><span class="n">params</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/pipeline.html#LocalProcessor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.LocalProcessor" title="Permalink to this definition">¶</a></dt>
<dd><p>A <code class="docutils literal notranslate"><span class="pre">ComponentDescriptor</span></code> for a locally-invoked processor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>proc</strong> (<a class="reference internal" href="#mtap.processing.EventProcessor" title="mtap.processing.EventProcessor"><em>EventProcessor</em></a>) – The processor instance to run with the pipeline.</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>component_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – How the processor’s results will be identified locally. Will be modified to be unique
if it is not unique relative to other component in a pipeline.</p></li>
<li><p><strong>client</strong> (<a class="reference internal" href="#mtap.EventsClient" title="mtap.EventsClient"><em>EventsClient</em></a>) – The client used by the local processor to connect to an events service to retrieve
events and documents. Required because pipeline components are all called using
identifiers and not concrete objects.</p></li>
<li><p><strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.8)"><em>Optional</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a><em>, </em><em>Any</em><em>]</em>) – An optional parameter dictionary that will be passed to the processor as parameters
with every event or document processed. Values should be json-serializable.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="mtap.LocalProcessor.proc">
<code class="sig-name descname">proc</code><a class="headerlink" href="#mtap.LocalProcessor.proc" title="Permalink to this definition">¶</a></dt>
<dd><p>The processor instance to run with the pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.processing.EventProcessor" title="mtap.processing.EventProcessor">EventProcessor</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="mtap.LocalProcessor.component_id">
<code class="sig-name descname">component_id</code><a class="headerlink" href="#mtap.LocalProcessor.component_id" title="Permalink to this definition">¶</a></dt>
<dd><p>How the processor’s results will be identified locally. Will be modified to be unique
if it is not unique relative to other component in a pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="mtap.LocalProcessor.client">
<code class="sig-name descname">client</code><a class="headerlink" href="#mtap.LocalProcessor.client" title="Permalink to this definition">¶</a></dt>
<dd><p>The client used by the local processor to connect to an events service to retrieve
events and documents. Required because pipeline components are all called using
identifiers and not concrete objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mtap.EventsClient" title="mtap.EventsClient">EventsClient</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="mtap.LocalProcessor.params">
<code class="sig-name descname">params</code><a class="headerlink" href="#mtap.LocalProcessor.params" title="Permalink to this definition">¶</a></dt>
<dd><p>An optional parameter dictionary that will be passed to the processor as parameters
with every event or document processed. Values should be json-serializable.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)">dict</a>, Any]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mtap.processing.ProcessingResult">
<em class="property">class </em><code class="sig-prename descclassname">mtap.processing.</code><code class="sig-name descname">ProcessingResult</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">identifier</span></em>, <em class="sig-param"><span class="n">results</span></em>, <em class="sig-param"><span class="n">timing_info</span></em>, <em class="sig-param"><span class="n">created_indices</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mtap.processing.ProcessingResult" title="Permalink to this definition">¶</a></dt>
<dd><p>The result of processing one document or event.</p>
<dl class="py attribute">
<dt id="mtap.processing.ProcessingResult.created_indices">
<code class="sig-name descname">created_indices</code><em class="property">: Dict<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a><span class="p">, </span>List<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#mtap.processing.ProcessingResult.created_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Any indices that have been
added to documents by this processor.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)">dict</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)">list</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="mtap.processing.ProcessingResult.identifier">
<code class="sig-name descname">identifier</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a></em><a class="headerlink" href="#mtap.processing.ProcessingResult.identifier" title="Permalink to this definition">¶</a></dt>
<dd><p>The id of the processor with respect to the
pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="mtap.processing.ProcessingResult.results">
<code class="sig-name descname">results</code><em class="property">: Dict</em><a class="headerlink" href="#mtap.processing.ProcessingResult.results" title="Permalink to this definition">¶</a></dt>
<dd><p>The json object returned by the
processor as its results.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)">dict</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a>, Any]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="mtap.processing.ProcessingResult.timing_info">
<code class="sig-name descname">timing_info</code><em class="property">: Dict</em><a class="headerlink" href="#mtap.processing.ProcessingResult.timing_info" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary of the times
taken processing this document</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)">dict</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.8)">timedelta</a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mtap.processing.TimerStats">
<em class="property">class </em><code class="sig-prename descclassname">mtap.processing.</code><code class="sig-name descname">TimerStats</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mean</span></em>, <em class="sig-param"><span class="n">std</span></em>, <em class="sig-param"><span class="n">min</span></em>, <em class="sig-param"><span class="n">max</span></em>, <em class="sig-param"><span class="n">sum</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mtap.processing.TimerStats" title="Permalink to this definition">¶</a></dt>
<dd><p>Statistics about a specific keyed measured duration recorded by a
<a class="reference internal" href="#mtap.processing.base.Stopwatch" title="mtap.processing.base.Stopwatch"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Stopwatch</span></code></a>.</p>
<dl class="py attribute">
<dt id="mtap.processing.TimerStats.max">
<code class="sig-name descname">max</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.8)">datetime.timedelta</a></em><a class="headerlink" href="#mtap.processing.TimerStats.max" title="Permalink to this definition">¶</a></dt>
<dd><p>The minimum of all measured durations.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.8)">timedelta</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="mtap.processing.TimerStats.mean">
<code class="sig-name descname">mean</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.8)">datetime.timedelta</a></em><a class="headerlink" href="#mtap.processing.TimerStats.mean" title="Permalink to this definition">¶</a></dt>
<dd><p>The sample mean of all measured durations.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.8)">timedelta</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="mtap.processing.TimerStats.min">
<code class="sig-name descname">min</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.8)">datetime.timedelta</a></em><a class="headerlink" href="#mtap.processing.TimerStats.min" title="Permalink to this definition">¶</a></dt>
<dd><p>The maximum of all measured durations.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.8)">timedelta</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="mtap.processing.TimerStats.std">
<code class="sig-name descname">std</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.8)">datetime.timedelta</a></em><a class="headerlink" href="#mtap.processing.TimerStats.std" title="Permalink to this definition">¶</a></dt>
<dd><p>The sample standard deviation of all measured
durations.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.8)">timedelta</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="mtap.processing.TimerStats.sum">
<code class="sig-name descname">sum</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.8)">datetime.timedelta</a></em><a class="headerlink" href="#mtap.processing.TimerStats.sum" title="Permalink to this definition">¶</a></dt>
<dd><p>The sum of all measured durations.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.8)">timedelta</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mtap.processing.AggregateTimingInfo">
<em class="property">class </em><code class="sig-prename descclassname">mtap.processing.</code><code class="sig-name descname">AggregateTimingInfo</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">identifier</span></em>, <em class="sig-param"><span class="n">timing_info</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/base.html#AggregateTimingInfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.processing.AggregateTimingInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Collection of all of the timing info for a specific processor.</p>
<dl class="py attribute">
<dt id="mtap.processing.AggregateTimingInfo.identifier">
<code class="sig-name descname">identifier</code><a class="headerlink" href="#mtap.processing.AggregateTimingInfo.identifier" title="Permalink to this definition">¶</a></dt>
<dd><p>The ID of the processor with respect to the pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="mtap.processing.AggregateTimingInfo.timing_info">
<code class="sig-name descname">timing_info</code><a class="headerlink" href="#mtap.processing.AggregateTimingInfo.timing_info" title="Permalink to this definition">¶</a></dt>
<dd><p>A map from all of the timer keys for the processor to the aggregated duration statistics.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)">dict</a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a>, <a class="reference internal" href="#mtap.processing.TimerStats" title="mtap.processing.TimerStats">TimerStats</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mtap.processing.AggregateTimingInfo.print_times">
<code class="sig-name descname">print_times</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/processing/base.html#AggregateTimingInfo.print_times"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.processing.AggregateTimingInfo.print_times" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints the aggregate timing info for all processing components using <code class="docutils literal notranslate"><span class="pre">print</span></code>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="configuration">
<h3><a class="toc-backref" href="#id13">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="mtap.Config">
<em class="property">class </em><code class="sig-prename descclassname">mtap.</code><code class="sig-name descname">Config</code><a class="reference internal" href="_modules/mtap/_config.html#Config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.Config" title="Permalink to this definition">¶</a></dt>
<dd><p>The MTAP configuration dictionary.</p>
<p>By default configuration is loaded from one of a number of locations in the following priority:</p>
<blockquote>
<div><ul class="simple">
<li><p>A file at the path of the ‘–config’ parameter passed into main methods.</p></li>
<li><p>A file at the path of the ‘MTAP_CONFIG’ environment variable</p></li>
<li><p>$PWD/mtapConfig.yml</p></li>
<li><p>$HOME/.mtap/mtapConfig.yml’</p></li>
<li><p>/etc/mtap/mtapConfig.yml</p></li>
</ul>
</div></blockquote>
<p>MTAP components will use a global shared configuration object, by entering the context of a
config object using “with”, all of the MTAP functions called on that thread will make use of
that config object.</p>
<p>Examples:
&gt;&gt;&gt; with mtap.Config() as config:
&gt;&gt;&gt;     config[‘key’] = ‘value’
&gt;&gt;&gt;     # other MTAP methods in this
&gt;&gt;&gt;     # block will use the updated config object.</p>
<dl class="py method">
<dt id="mtap.Config.update_from_yaml">
<code class="sig-name descname">update_from_yaml</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mtap/_config.html#Config.update_from_yaml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mtap.Config.update_from_yaml" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the configuration by loading and collapsing all of the structures in a yaml file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – The path to the yaml file to load.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Table of Contents</a></h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">mtap</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#command-line-utility">Command-Line Utility</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#running-events-service">Running Events Service</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#api-documentation">API Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#events-service-client-documents">Events service client, documents</a></li>
<li class="toctree-l3"><a class="reference internal" href="#labels">Labels</a></li>
<li class="toctree-l3"><a class="reference internal" href="#label-indices">Label Indices</a></li>
<li class="toctree-l3"><a class="reference internal" href="#custom-label-types">Custom Label Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-processors">Creating Processors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#processor-description-decorators">Processor Description Decorators</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-services">Running Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-a-pipeline">Running a pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="io.html">mtap.io</a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Welcome to MTAP’s documentation!</a></li>
      <li>Next: <a href="io.html" title="next chapter">mtap.io</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/mtap.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Regents of the University of Minnesota..
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/mtap.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>